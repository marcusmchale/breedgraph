type Record {
    id: Int!
    unit: Unit
    value: String
    start: DateTime
    end: DateTime
    references: [ReferenceInterface]
    submitted: DateTime
}

type Dataset {
    id: Int!
    # concept is either a Factor or Variable in the ontology
    concept: OntologyEntryInterface
    records: [Record]
    contributors: [Person]
    references: [ReferenceInterface]
}

type SubmittedRecord {
    id: Int  # may be null if a new record, or provided if an update
    unitId: Int!
    value: String
    start: DateTime
    end: DateTime
    referenceIds: [Int]
}

type SubmittedData {
    conceptId: Int!
    records: [SubmittedRecord]
    contributors: [Person]
    references: [ReferenceInterface]
}

enum SubmissionStatus {
    PENDING
    PROCESSING
    COMPLETED
    FAILED
}

type ItemError {
    index: Int!
    error: String!
}

type DatasetSubmission {
    data: SubmittedData
    datasetId: Int
    status: SubmissionStatus
    errors: [String]
    itemErrors: [ItemError]
}

type DatasetSummary {
    id: Int!
    concept: OntologyEntryInterface,
    subjects: [Subject]
    locations: [Location]
    blocks: [Unit]
    unit_count: Int!
    record_count: Int!
    start: DateTime
    end: DateTime
}
